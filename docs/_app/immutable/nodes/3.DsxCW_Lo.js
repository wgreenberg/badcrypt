import{b as k,t as P}from"../chunks/disclose-version.pLFdtCJ_.js";import{h as z,A,_ as x,C as I,a1 as o,$ as s,a0 as l,at as G,au as h,Q as r,R as _}from"../chunks/runtime.CpPTpihc.js";import{s as U}from"../chunks/render.BmL8sTPL.js";import{i as T}from"../chunks/if.DsiqvmFP.js";import{r as S,s as Q,b as q,R as V,a as B,c as W,d as X}from"../chunks/crypto.Dgy93MDv.js";import{d as J}from"../chunks/store.C9D0N3Vv.js";import{p as F,a as f,o as Y}from"../chunks/index-client.DIn6mBrw.js";function Z(e,a){var i=e.__className,t=O(a);z&&e.className===t?e.__className=t:(i!==t||z&&e.className!==t)&&(a==null?e.removeAttribute("class"):e.className=t,e.__className=t)}function O(e){return e??""}var n=(e=>(e[e.None=0]="None",e[e.Decrypt=1]="Decrypt",e[e.Encrypt=2]="Encrypt",e))(n||{});function $(e,a){a.keyPair&&navigator.clipboard.writeText(JSON.stringify(a.keyPair.publicKey))}var ee=P('<div><div class="publickey"><p>My public key</p> <input type="text"> <button>Copy Public Key</button></div> <div class="privatekey"><p>My private key</p> <input type="text"></div></div>');function te(e,a){A(a,!0);var i=ee(),t=s(i),v=o(s(t),2);S(v),x(()=>Q(v,a.keyPair?JSON.stringify(a.keyPair.publicKey):"loading..."));var p=o(v,2);p.__click=[$,a],l(t);var c=o(t,2),y=o(s(c),2);S(y),l(c),l(i),x(()=>Q(y,a.keyPair?a.keyPair.privateKey:"loading...")),k(e,i),I()}J(["click"]);function ae(e,a){const i=e.target.value;a(V.fromString(i))}var ie=P('<div><p>Public key of recipient</p> <input type="text"></div>'),re=P('<div><div><label><input type="radio">Encrypt</label> <label><input type="radio">Decrypt</label></div> <!></div>');function ne(e,a){A(a,!0);const i=[];let t=F(a,"operation",15),v=F(a,"recipientKey",15);var p=re(),c=s(p),y=s(c),d=s(y);S(d);var b;G(),l(y);var K=o(y,2),g=s(K);S(g);var m;G(),l(K),l(c);var E=o(c,2);T(E,()=>t()===n.Encrypt,D=>{var N=ie(),u=o(s(N),2);u.__input=[ae,v],l(N),k(D,N)}),l(p),x(()=>{b!==(b=n.Encrypt)&&(d.value=(d.__value=n.Encrypt)==null?"":n.Encrypt),m!==(m=n.Decrypt)&&(g.value=(g.__value=n.Decrypt)==null?"":n.Decrypt)}),q(i,[],d,()=>(n.Encrypt,t()),t),q(i,[],g,()=>(n.Decrypt,t()),t),k(e,p),I()}J(["input"]);function oe(e,a,i,t,v,p){r(a)===n.Encrypt&&r(i)?(_(t,f(r(i).encryptString(r(v)))),navigator.clipboard.writeText(r(t))):r(a)===n.Decrypt?(_(t,f(r(p).decryptString(r(v)))),navigator.clipboard.writeText(r(t))):_(t,void 0)}var se=P("<span><b>Copied result:</b> </span>"),le=P('<div><p>Secret:</p> <input type="text"> <button>GO</button> <!></div>'),ve=P('<div class="container svelte-1xupeis"><div class="opbox"><!> <!></div> <div class="keyzone svelte-1xupeis"><!> <button>Reroll</button></div> <img height="200" width="800" src="secretsafe.jpg"></div>');function be(e,a){A(a,!0);let i=h(void 0),t=h(f(n.None)),v=h(void 0),p=h(void 0),c=h("");Y(()=>{let u=window.localStorage.getItem("rsaKeyPair");u?_(i,f(B.fromString(u))):y()});function y(){_(i,f(B.generate())),window.localStorage.setItem("rsaKeyPair",r(i).toString())}var d=ve(),b=s(d),K=s(b);ne(K,{get operation(){return r(t)},set operation(u){_(t,f(u))},get recipientKey(){return r(v)},set recipientKey(u){_(v,f(u))}});var g=o(K,2);T(g,()=>r(t)!==n.None,u=>{var R=le(),w=o(s(R),2);S(w);var j=o(w,2);j.__click=[oe,t,v,p,c,i];var H=o(j,2);T(H,()=>r(p),C=>{var M=se(),L=o(s(M));l(M),x(()=>U(L,` ${r(p)??""}`)),k(C,M)}),l(R),x(()=>X(w,"maxlength",r(t)===n.Encrypt?4:void 0)),W(w,()=>r(c),C=>_(c,C)),k(u,R)}),l(b);var m=o(b,2),E=s(m);te(E,{get keyPair(){return r(i)}});var D=o(E,2);D.__click=y,l(m);var N=o(m,2);l(d),x(()=>Z(N,`${(r(p)?"show":"hide")??""} svelte-1xupeis`)),k(e,d),I()}J(["click"]);export{be as component};
